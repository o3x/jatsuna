# Changelog

## [6.3.0]
**日時**: Wed Nov 27 10:35:00 JST 2025  
**変更内容**:

### Changed
- **チュートリアル表示方法の変更**: 初回起動時の自動表示を無効化し、ボタンで表示する方式に変更しました
  - ゲーム設定画面に「📚 チュートリアル」ボタンを追加
  - 初回起動時にチュートリアルが自動的に表示されなくなりました
  - ユーザーが必要な時にチュートリアルを表示できるようになりました

## [6.2.1]
**日時**: Wed Nov 27 10:31:00 JST 2025  
**変更内容**:

### Fixed
- **クリックバグ修正**: バージョン6.2.0で発生していた、自分の手番時にどこもクリックできない問題を修正しました
  - `resetGame()`関数内の`gameStarted`フラグの状態管理を修正
  - `setGameStarted(false)`を削除し、即座に`setGameStarted(true)`を設定するように変更

## [6.2.0]
**日時**: Wed Nov 27 10:25:00 JST 2025  
**変更内容**:

### Added
- **インタラクティブチュートリアル**: 初回起動時に新規プレイヤー向けのチュートリアルが自動表示されるようになりました
  - 6ステップのわかりやすいガイド
  - ゲームルールと操作方法の説明
  - スキップ機能付き
  - LocalStorageで完了状態を保存（2回目以降は表示されません）
  - モーダルオーバーレイで視認性向上

### Fixed
- **App.jsx構造の修正**: ファイル内の重複コードを削除し、正しいJSX構造に修正しました

## [6.1.3]
**日時**: Sun Nov 24 19:09:00 JST 2025  
**変更内容**:

### Changed
- **石のデザイン改善**: オーブ、ジェム、ステラの石を3Dグラデーション、影、光沢で格好良く改善しました
  - 放射状グラデーション（radial-gradient）で立体感を演出
  - 内側の光沢（inset box-shadow）で宝石のような輝き
  - 外側の影（box-shadow）で浮き上がる効果

## [6.1.2]
**日時**: Sun Nov 24 19:05:00 JST 2025  
**変更内容**:

### Added
- **ルーレット音**: 手番決定のルーレット回転時に音が鳴るようになりました

### Changed
- **AI難易度の調整**: EasyとMediumの難易度を弱く調整しました
  - Medium: ランダム性を増加（0.5 → 2.0）して、より勝ちやすく

### Fixed
- **Ranking無限ループ修正**: ゲーム終了時に真っ白画面になる問題を修正しました

## [6.1.1]
**日時**: Sun Nov 24 18:50:00 JST 2025  
**変更内容**:

### Added
- **オーケストラルサウンドシステム**: 旧バージョン（v5.4）の高品質なサウンドを完全移植
  - **石を置く音**:
    - キャプチャなし: シンプルな配置音
    - 1-3個: マリンバ風サウンド（リバーブ付き）
    - 4個以上: オーケストラヒット
  - **エンディング音楽（順位別）**:
    - 🥇 1位: 華やかな上昇和音（ファンファーレ）
    - 🥈 2位: 穏やかな銀メダル音
    - 🤝 引き分け: 平板な中立音
    - 🥉 3位: 悲しい下降音
  - **iOS対応**: AudioContextの永続化とサスペンド状態の自動resume()

## [6.1.0]
**日時**: Sun Nov 24 16:30:00 JST 2025  
**変更内容**:

### Balanced
- **初期配置の変更**: AIシミュレーションの結果に基づき、ゲームバランスを公平化するために初期配置を変更しました。
    - 旧: 中央に密集し、壁(X)が存在する配置（1番手必勝）
    - 新: "Wide Triangle" 配置。3人が三角形に距離を取って配置され、壁(X)を削除。これにより各プレイヤーの勝率が均衡しました。

### Changed
- **ルーレットの短縮**: 手番決めのルーレットアニメーションを約3秒に短縮し、テンポを向上させました。
- **UIレイアウト修正**:
    - 画面全体の高さを固定し、操作ごとの不快なスクロール（レイアウトシフト）を防止しました。
    - AI「思考中」メッセージの表示領域を固定し、表示/非表示による画面のガタつきを解消しました。
- **AIロジックの分離**: AIの思考ロジックを `src/utils/aiLogic.js` に分離し、Node.js環境でのシミュレーションを可能にしました。

## [6.0.0]
**日時**: Sun Nov 24 10:00:00 JST 2025  
**変更内容**:

### Added
- **Reactリファクタリング**: 従来のHTML1ファイル構成から、Vite + Reactによるモダンな構成へ完全移行しました。
- **AI難易度設定**:
    - **Easy**: ランダム
    - **Medium**: 貪欲法（獲得数重視）
    - **Hard**: 位置評価重視
    - **SuperHard**: 1手読み + 高度な評価関数
    - **Ultimate**: 最凶結託モード（既存機能の移植）
- **合法手の可視化**: 石を置ける場所に黄色いマーカーと点滅アニメーションを追加し、視認性を向上させました。

### Fixed
- **ルーレット機能**: React移行時に一時的に動作しなくなっていたルーレット機能を復旧・改善しました。

---

## Version 5.6.1 - iOS Audio Fix Edition
**日時**: 2025-11-09 19:09  
**変更内容**:

### 📱 iOS音声問題の完全解決
- AudioContextの永続化（useRefフック導入）
- 初期化タイミングの最適化（ゲーム開始時・石配置時）
- サスペンド状態の明示的なresume()呼び出し
- iOS Web Audio API制約への完全対応

---

## Version 5.6 - Ultimate Collusion Edition
**日時**: 2025-11-08 16:30  
**変更内容**:

### 👿 Gemini版の最強アルゴリズムを統合
- 超強力な結託評価関数（プレイヤースコア4倍重み、選択肢制限8倍重み）
- ミニマックス探索の最適化（深度4、Alpha-Beta枝刈り）
- 視覚効果の強化（evil-glow、collusion-pulse）
- サウンド改善（邪悪な音、極低音）

---

## Version 5.5 - Collusion Mode Edition
**日時**: 2025-11-08 13:45  
**変更内容**:

### 😈 いかさま最強モード実装
- AI同士の結託システム（2体のAIがプレイヤーを共通の敵として認識）
- 強化された思考能力（3-4手先読み）
- 専用ボタンデザイン（赤黒グラデーション、邪悪な光るエフェクト）

---

## Version 5.4.3 - Bug Fix Edition
**日時**: 2025-11-06 17:20  
**変更内容**:

### 🐛 重大なバグ修正
- ルーレット後の初手で打てない問題を修正
- `gameStarted`フラグの設定タイミングを最適化

---

## Version 5.4.2 - Shape Names Edition
**日時**: 2025-11-05 09:03  
**変更内容**:

### 🔮 名称システムの大幅改革
- オレンジ → オーブ（Orb）●
- シアン → ジェム（Gem）◆
- パープル → ステラ（Stella）★

---

## Version 5.4.1 - Victory Fix Edition
**日時**: 2025-11-05 08:45  
**変更内容**:

### 🐛 重要なバグ修正
- プレイヤー色の判定バグを修正
- 手番位置に基づいて正しいプレイヤー色を判定

---

## Version 5.4 - Victory Display Edition
**日時**: 2025-11-05 08:39  
**変更内容**:

### 🏆 勝利判定とランキング表示の大幅改善
- 最終ランキング表の追加（メダル表示）
- ユーザー順位の強調（黄色いリング）
- 勝敗メッセージの改善

---

## Version 5.3 - Rulebook Edition
**日時**: 2025-11-05 01:00  
**変更内容**:

### 📚 公式ルールブック作成
- Markdownバージョン作成
- HTMLバージョン作成（レスポンシブデザイン）

---

## Version 5.2 Fixed - Turn Management Fix
**日時**: 2025-11-05 00:05  
**変更内容**:

### 🐛 致命的なバグ修正
- 手番管理の完全修正
- 勝者表示の改善
- デフォルト設定を「ルーレット」に変更

---

## Version 5.2 - Super Hard AI & Orchestral Sound
**日時**: 2025-11-04  
**変更内容**:

### 🤖 Super Hard AI実装
- ミニマックス法導入（2-3手先読み）
- Alpha-Beta枝刈りで高速化

### 🎵 オーケストラルサウンド実装
- マリンバ風サウンド
- オーケストラヒット
- リアルな石の音

---

## Version 5.1 - Shape System & Basic Sound
**日時**: 2025-11-04  
**変更内容**:

### 🔮 形状による識別システム
- 3種類の石の形状（●◆★）
- CSS clip-path実装

### 🔊 基本的なサウンドシステム
- Web Audio APIで生成
- 勝利音/敗北音

---

## Version 5.0 - Universal Design
**日時**: 2025-11-04  
**変更内容**:

### ♿ ユニバーサルデザイン対応
- 色覚多様性への配慮
- アクセシビリティ向上

---

## Version 4.1 - Balance Optimization
**日時**: 2025-11-03 22:01  
**変更内容**:

### 📏 中心固定方式採用
- 7×7ボード改革（中央1マスを固定）
- 初期配置の再調整
- 手番均等化達成（各プレイヤー15手）

---

## Version 4.0 - Feature Enhancement
**日時**: 2025-11-03 13:23  
**変更内容**:

### 🎮 主要機能追加
- ボードサイズ選択（7×7/9×9）
- AI難易度3段階
- キャプチャ予告表示
- アニメーション効果
- サウンドシステム

---

## Version 3.0 - Optimal Balance Discovery
**日時**: 2025-11-03 17:40  
**変更内容**:

### 🔬 大規模シミュレーション実施
- 15パターン×1000ゲーム検証
- Sparse Triangle配置採用
- 勝率スプレッド43.6% → 6.6%の大改善

---

## Version 2.1 - Triangle Placement
**日時**: 2025-11-03 17:27  
**変更内容**:

### 🔺 初期配置を三角形に変更
- 横一列配置の問題を解決
- より戦略的なゲーム展開

---

## Version 2.0 - Initial Placement Addition
**日時**: 2025-11-03 16:51  
**変更内容**:

### 🎯 初期配置の追加
- 中央横一列配置（R-G-B）

---

## Version 1.0 - Initial Release
**日時**: 2025-11-03 16:38  
**変更内容**:

### 🎉 初期リリース
- 基本ゲームシステム（9×9ボード）
- 3人プレイ（プレイヤー1人 + AI 2体）
- 色変換ルール（R→G→B→R）
- 基本AI（貪欲法）

---

*© 2025 蛇突奈 (Jatsuna)*  
*開発: Claude, Gemini & OHYAMA, Yoshihisa (o3x) Collaboration*